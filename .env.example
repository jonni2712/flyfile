# ============================================================================
# FlyFile - Environment Variables
# Secure file transfer platform
#
# This project is developed with vibe coding using Claude Code by Anthropic
# https://github.com/anthropics/claude-code
#
# Copy this file to .env.local (for development) or .env (for Docker)
# and fill in your values
# ============================================================================

# ============================================================================
# APPLICATION
# ============================================================================
NEXT_PUBLIC_BASE_URL=http://localhost:3000
NODE_ENV=development

# Self-hosted mode (enables self-hosted specific features, disables some hosted-only features)
SELF_HOSTED=false

# Admin emails (comma-separated list)
ADMIN_EMAILS=admin@flyfile.it,your-admin@example.com

# ============================================================================
# FIREBASE (Required)
# Create a project at https://console.firebase.google.com
# ============================================================================

# Client-side Firebase config (from Firebase Console > Project Settings)
NEXT_PUBLIC_FIREBASE_API_KEY=your_firebase_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=your_measurement_id

# Server-side Firebase Admin (from Firebase Console > Service Accounts)
FIREBASE_ADMIN_PROJECT_ID=your_project_id
FIREBASE_ADMIN_CLIENT_EMAIL=firebase-adminsdk-xxx@your_project.iam.gserviceaccount.com
# Note: For Docker, use base64 encoded key or escape newlines as \n
FIREBASE_ADMIN_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"

# ============================================================================
# STORAGE - S3 Compatible (Choose one provider)
# ============================================================================

# Provider: minio, r2, s3, or custom
STORAGE_PROVIDER=r2

# --- Option 1: MinIO (Self-hosted - recommended for Docker) ---
# STORAGE_PROVIDER=minio
# STORAGE_ENDPOINT=http://minio:9000
# STORAGE_ACCESS_KEY=minioadmin
# STORAGE_SECRET_KEY=minioadmin
# STORAGE_BUCKET=flyfile
# STORAGE_REGION=us-east-1
# STORAGE_PUBLIC_URL=http://localhost:9000/flyfile
# STORAGE_FORCE_PATH_STYLE=true

# --- Option 2: Cloudflare R2 (Default for hosted version) ---
R2_ACCOUNT_ID=your_cloudflare_account_id
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
R2_BUCKET_NAME=flyfile-transfers
R2_PUBLIC_URL=https://files.yourdomain.com

# --- Option 3: AWS S3 ---
# STORAGE_PROVIDER=s3
# STORAGE_ENDPOINT=https://s3.amazonaws.com
# STORAGE_ACCESS_KEY=your_aws_access_key
# STORAGE_SECRET_KEY=your_aws_secret_key
# STORAGE_BUCKET=your-bucket-name
# STORAGE_REGION=us-east-1
# STORAGE_PUBLIC_URL=https://your-bucket.s3.amazonaws.com

# ============================================================================
# REDIS (Rate Limiting)
# ============================================================================

# Option 1: Upstash Redis (Serverless - for Vercel deployment)
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_upstash_token

# Option 2: Self-hosted Redis (Docker)
# REDIS_URL=redis://redis:6379
# REDIS_PASSWORD=your_secure_redis_password

# ============================================================================
# EMAIL (SMTP)
# ============================================================================
MAIL_HOST=mail.flyfile.it
MAIL_PORT=465
MAIL_USERNAME=no-reply@flyfile.it
MAIL_PASSWORD=your_smtp_password
MAIL_SECURE=true
MAIL_FROM_ADDRESS=no-reply@flyfile.it
MAIL_FROM_NAME=FlyFile

# ============================================================================
# SECURITY
# ============================================================================

# Password hashing salt (generate with: openssl rand -hex 32)
PASSWORD_SALT=your_secure_random_salt_here

# TOTP encryption key for 2FA (generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))")
TOTP_ENCRYPTION_KEY=your_64_character_hex_key_here

# ============================================================================
# STRIPE (Optional - for paid plans)
# Leave empty if self-hosting without payment features
# ============================================================================
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Price IDs (create in Stripe Dashboard)
STRIPE_STARTER_MONTHLY_PRICE_ID=price_starter_monthly
STRIPE_STARTER_ANNUAL_PRICE_ID=price_starter_annual
STRIPE_PRO_MONTHLY_PRICE_ID=price_pro_monthly
STRIPE_PRO_ANNUAL_PRICE_ID=price_pro_annual
STRIPE_BUSINESS_MONTHLY_PRICE_ID=price_business_monthly
STRIPE_BUSINESS_ANNUAL_PRICE_ID=price_business_annual

# ============================================================================
# GOOGLE OAUTH (Optional - for Google sign-in)
# ============================================================================
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# ============================================================================
# RECAPTCHA (Optional - for anonymous uploads protection)
# Get keys from: https://www.google.com/recaptcha/admin
# ============================================================================
NEXT_PUBLIC_RECAPTCHA_SITE_KEY=your_recaptcha_site_key
RECAPTCHA_SECRET_KEY=your_recaptcha_secret_key

# ============================================================================
# PRODUCTION (Docker Compose with Traefik)
# ============================================================================
# DOMAIN=files.yourdomain.com
# ACME_EMAIL=admin@yourdomain.com
# TRAEFIK_DASHBOARD_AUTH=admin:$apr1$xxxxx (htpasswd format)
# MINIO_ROOT_USER=secure_minio_user
# MINIO_ROOT_PASSWORD=secure_minio_password
